<!DOCTYPE html>
<html>
<head>
    <title>Flappy Bird</title>
    <style>
        /* CSS Styles */
    </style>
</head>
<body>
    <div id="game-container">
        <div id="bird"></div>
    </div>
    <div id="score">Score: 0</div>

    <script>
        var bird = document.getElementById("bird");
        var gameContainer = document.getElementById("game-container");
        var scoreLabel = document.getElementById("score");
        var pipes = [];
        var score = 0;
        var gravity = 1.5;
        var jumpStrength = 15;
        var gameSpeed = 2.5;
        var gameLoop;
        var pipeInterval;
        var isJumping = false;
        var birdColors = ["red", "blue", "green", "yellow"];

        function createPipe() {
            var pipe = document.createElement("div");
            pipe.classList.add("pipe");
            pipe.style.left = gameContainer.offsetWidth + "px";
            pipe.style.top = Math.random() * (gameContainer.offsetHeight - 200) + "px";
            gameContainer.appendChild(pipe);
            pipes.push(pipe);
        }

        function updatePipes() {
            for (var i = 0; i < pipes.length; i++) {
                var pipe = pipes[i];
                var pipeRect = pipe.getBoundingClientRect();
                var birdRect = bird.getBoundingClientRect();

                if (birdRect.right > pipeRect.left && birdRect.left < pipeRect.right && birdRect.bottom > pipeRect.top && birdRect.top < pipeRect.bottom) {
                    gameOver();
                }

                if (pipeRect.right < 0) {
                    pipe.remove();
                    pipes.splice(i, 1);
                    score++;
                    scoreLabel.innerText = "Score: " + score;
                }

                pipe.style.left = pipeRect.left - gameSpeed + "px";
            }
        }

        function jump() {
            if (!isJumping) {
                isJumping = true;
                var jumpInterval = setInterval(function () {
                    var birdRect = bird.getBoundingClientRect();
                    if (birdRect.top <= 0 || isJumping === false) {
                        clearInterval(jumpInterval);
                        isJumping = false;
                    } else {
                        bird.style.top = bird.offsetTop - jumpStrength + "px";
                    }
                }, 20);
            }
        }

        function gameOver() {
            clearInterval(gameLoop);
            clearInterval(pipeInterval);
            alert("Jiah, kalah! Masa gitu aja gabisa?");
            restartGame();
        }

        function restartGame() {
            bird.style.top = "200px";
            score = 0;
            scoreLabel.innerText = "Score: " + score;
            pipes.forEach(function (pipe) {
                pipe.remove();
            });
            pipes = [];
            startGame();
        }

        function startGame() {
            bird.style.top = "200px";
            gameLoop = setInterval(function () {
                var birdRect = bird.getBoundingClientRect();
                var gameContainerRect = gameContainer.getBoundingClientRect();

                if (birdRect.bottom >= gameContainerRect.bottom) {
                    gameOver();
                }

                bird.style.top = bird.offsetTop + gravity + "px";
                updatePipes();
            }, 20);

            pipeInterval = setInterval(createPipe, 3000);
        }

        function handleKeyDown(event) {
            if (event.code === "Space") {
                jump();
            }
        }

        function changeBirdColor() {
            var randomColor = birdColors[Math.floor(Math.random() * birdColors.length)];
            bird.style.backgroundColor = randomColor;
        }

        document.addEventListener("keydown", handleKeyDown);
        setInterval(changeBirdColor, 1000);
        startGame();
    </script>
</body>
</html>
