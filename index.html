<!DOCTYPE html>
<html>
<head>
    <title>Flappy Bird</title>
    <style>
        body {
            overflow: hidden;
            animation: cmatrix 1s infinite;
        }

        @keyframes cmatrix {
            0% { background-color: #000; }
            25% { background-color: #0F0; }
            50% { background-color: #00F; }
            75% { background-color: #F00; }
            100% { background-color: #000; }
        }

        #game-container {
            position: relative;
            width: 400px;
            height: 600px;
            margin: 0 auto;
            overflow: hidden;
        }

        #bird {
            position: absolute;
            left: 50px;
            top: 200px;
            width: 50px;
            height: 50px;
            background-color: yellow;
            transition: transform 0.2s ease-out;
        }

        .pipe {
            position: absolute;
            width: 80px;
            height: 400px;
            background-color: green;
            transition: left 2s linear;
        }

        #score {
            position: absolute;
            top: 10px;
            right: 10px;
            color: white;
            font-size: 24px;
        }
    </style>
</head>
<body>
    <div id="game-container">
        <div id="bird"></div>
        <div id="score">Score: 0</div>
    </div>

    <script>
        var bird = document.getElementById("bird");
        var gameContainer = document.getElementById("game-container");
        var scoreLabel = document.getElementById("score");
        var pipes = [];
        var score = 0;
        var gravity = 1.5;
        var jumpStrength = 25;
        var gameSpeed = 5;
        var gameLoop;

        function createPipe() {
            var pipe = document.createElement("div");
            pipe.classList.add("pipe");
            pipe.style.left = gameContainer.offsetWidth + "px";
            pipe.style.top = Math.random() * (gameContainer.offsetHeight - 200) + "px";
            gameContainer.appendChild(pipe);
            pipes.push(pipe);
        }

        function updatePipes() {
            for (var i = 0; i < pipes.length; i++) {
                var pipe = pipes[i];
                var pipeRect = pipe.getBoundingClientRect();
                var birdRect = bird.getBoundingClientRect();

                if (
                    birdRect.right > pipeRect.left &&
                    birdRect.left < pipeRect.right &&
                    birdRect.bottom > pipeRect.top &&
                    birdRect.top < pipeRect.bottom
                ) {
                    gameOver();
                }

                if (pipeRect.right < 0) {
                    pipe.remove();
                    pipes.splice(i, 1);
                    score++;
                    scoreLabel.innerText = "Score: " + score;
                }

                pipe.style.left = pipeRect.left - gameSpeed + "px";
            }
        }

        function jump() {
            bird.style.transform = "translateY(" + (-jumpStrength) + "px)";
        }

        function gameOver() {
            clearInterval(gameLoop);
            document.removeEventListener("keydown", handleKeyPress);
            document.addEventListener("keydown", restartGame);
            alert("Jiah kalah, masa gitu aja gabisa! Your score is: " + score + "\nPress Space to restart the game.");
        }

        function restartGame(event) {
            if (event.code === "Space") {
                pipes.forEach(function (pipe) {
                    pipe.remove();
                });
                pipes = [];
                bird.style.transform = "translateY(0)";
                bird.style.top = "200px";
                score = 0;
                scoreLabel.innerText = "Score: " + score;
                document.removeEventListener("keydown", restartGame);
                startGame();
            }
        }

        function startGame() {
            document.addEventListener("keydown", handleKeyPress);
            gameLoop = setInterval(function() {
                var birdRect = bird.getBoundingClientRect();
                var gameContainerRect = gameContainer.getBoundingClientRect();

                if (
                    birdRect.bottom >= gameContainerRect.bottom ||
                    birdRect.top <= 0
                ) {
                    gameOver();
                }

                bird.style.transform = "translateY(" + gravity + "px)";
                updatePipes();
            }, 20);

            setInterval(createPipe, 3000);
        }

        function handleKeyPress(event) {
            if (event.code === "Space") {
                jump();
            }
        }

        startGame();
    </script>
</body>
</html>
