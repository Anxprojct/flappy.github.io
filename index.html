<!DOCTYPE html>
<html>
<head>
    <title>Flappy Bird</title>
    <style>
        #game-container {
            position: relative;
            width: 400px;
            height: 600px;
            border: 1px solid black;
            margin: 0 auto;
            overflow: hidden;
        }

        #bird {
            position: absolute;
            left: 50px;
            top: 200px;
            width: 50px;
            height: 50px;
            background-color: yellow;
        }

        .pipe {
            position: absolute;
            width: 80px;
            background-color: green;
            transition: left 2s linear;
        }

        .top-pipe {
            height: 200px;
            top: 0;
        }

        .bottom-pipe {
            height: 200px;
            bottom: 0;
        }

        #score {
            position: absolute;
            top: 10px;
            right: 10px;
            font-size: 24px;
        }
    </style>
</head>
<body>
    <div id="game-container">
        <div id="bird"></div>
    </div>
    <div id="score">Score: 0</div>

    <script>
        var bird = document.getElementById("bird");
        var gameContainer = document.getElementById("game-container");
        var scoreLabel = document.getElementById("score");
        var pipes = [];
        var score = 0;
        var gravity = 1.5;
        var jumpStrength = 25;
        var gameSpeed = 5;

        function createPipe() {
            var pipeHeight = Math.random() * (gameContainer.offsetHeight - 200);
            var topPipe = createIndividualPipe(pipeHeight, "top-pipe");
            var bottomPipe = createIndividualPipe(gameContainer.offsetHeight - pipeHeight - 200, "bottom-pipe");

            gameContainer.appendChild(topPipe);
            gameContainer.appendChild(bottomPipe);

            pipes.push(topPipe);
            pipes.push(bottomPipe);
        }

        function createIndividualPipe(height, pipeClass) {
            var pipe = document.createElement("div");
            pipe.classList.add("pipe");
            pipe.classList.add(pipeClass);
            pipe.style.left = gameContainer.offsetWidth + "px";
            pipe.style.height = height + "px";
            return pipe;
        }

        function updatePipes() {
            for (var i = 0; i < pipes.length; i++) {
                var pipe = pipes[i];
                var pipeRect = pipe.getBoundingClientRect();
                var birdRect = bird.getBoundingClientRect();

                if (birdRect.right > pipeRect.left && birdRect.left < pipeRect.right && birdRect.bottom > pipeRect.top && birdRect.top < pipeRect.bottom) {
                    gameOver();
                }

                if (pipeRect.right < 0) {
                    pipe.remove();
                    pipes.splice(i, 1);
                    score++;
                    scoreLabel.innerText = "Score: " + score;
                }

                pipe.style.left = pipeRect.left - gameSpeed + "px";
            }
        }

        function jump() {
            bird.style.top = bird.offsetTop - jumpStrength + "px";
        }

        function gameOver() {
            clearInterval(gameLoop);
            clearInterval(scoreIncreaseLoop);
            alert("Game Over. Your score is: " + score);
            alert("Jiah, kalah! Masa gitu aja gabisa...");
        }

        document.addEventListener("keydown", function(event) {
            if (event.code === "Space") {
                jump();
            }
        });

        var gameLoop = setInterval(function() {
            var birdRect = bird.getBoundingClientRect();
            var gameContainerRect = gameContainer.getBoundingClientRect();

            if (birdRect.bottom >= gameContainerRect.bottom || birdRect.top <= gameContainerRect.top) {
                gameOver();
            }

            bird.style.top = bird.offsetTop + gravity + "px";
            updatePipes();
        }, 20);

        var scoreIncreaseLoop = setInterval(function() {
            score++;
            scoreLabel.innerText = "Score: " + score;
        }, 1000);

        setInterval(createPipe, 2000);
    </script>
</body>
</html>
